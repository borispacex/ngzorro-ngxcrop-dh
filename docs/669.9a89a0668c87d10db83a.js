"use strict";(self.webpackChunkngzorro_ngxcrop_dh=self.webpackChunkngzorro_ngxcrop_dh||[]).push([[669],{7669:(ai,X,g)=>{g.r(X),g.d(X,{WelcomeModule:()=>ni});var K=g(9838),e=g(7716),J=g(9075),m=g(7582),y=g(6782),wt=g(8049),tt=g(6682),k=g(2759),f=g(8583);const Tt=["wrapper"],Mt=["sourceImage"];function bt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){return e.CHM(t),e.oxw().imageLoadedInView()})("mousedown",function(o){e.CHM(t);const s=e.oxw();return s.startMove(o,s.moveTypes.Drag)})("touchstart",function(o){e.CHM(t);const s=e.oxw();return s.startMove(o,s.moveTypes.Drag)})("error",function(o){return e.CHM(t),e.oxw().loadImageError(o)}),e.qZA()}if(2&i){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",t.safeImgDataUrl,e.LSH),e.uIk("alt",t.imageAltText)}}function At(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"topleft")})("touchstart",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"topleft")}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"topright")})("touchstart",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"topright")}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"bottomright")})("touchstart",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"bottomright")}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"bottomleft")})("touchstart",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"bottomleft")}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"top")})("touchstart",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"top")}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"right")})("touchstart",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"right")}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"bottom")})("touchstart",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"bottom")}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"left")})("touchstart",function(o){e.CHM(t);const s=e.oxw(2);return s.startMove(o,s.moveTypes.Resize,"left")}),e.qZA(),e.BQk()}}function St(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(o){return e.CHM(t),e.oxw().keyboardAccess(o)}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(o){e.CHM(t);const s=e.oxw();return s.startMove(o,s.moveTypes.Move)})("touchstart",function(o){e.CHM(t);const s=e.oxw();return s.startMove(o,s.moveTypes.Move)}),e.qZA(),e.YNc(2,At,21,0,"ng-container",8),e.qZA()}if(2&i){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",t.roundCropper),e.uIk("aria-label",t.cropperFrameAriaLabel),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}class Nt{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperFrameAriaLabel="Crop photo",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(r){Object.keys(r).filter(t=>t in this).forEach(t=>this[t]=r[t]),this.validateOptions()}setOptionsFromChanges(r){Object.keys(r).filter(t=>t in this).forEach(t=>this[t]=r[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var z=(()=>{return(i=z||(z={})).Drag="drag",i.Move="move",i.Resize="resize",i.Pinch="pinch",z;var i})();function et(i,r){return i/100*r}let Ut=(()=>{class i{crop(t,n,o,s,a){const l=this.getImagePosition(t,n,o,a),c=l.x2-l.x1,p=l.y2-l.y1,h=document.createElement("canvas");h.width=c,h.height=p;const d=h.getContext("2d");if(!d)return null;null!=o.backgroundColor&&(d.fillStyle=o.backgroundColor,d.fillRect(0,0,c,p));const u=(o.transform.scale||1)*(o.transform.flipH?-1:1),v=(o.transform.scale||1)*(o.transform.flipV?-1:1),{translateH:A,translateV:R}=this.getCanvasTranslate(t,o,a),M=t.transformed;d.setTransform(u,0,0,v,M.size.width/2+A,M.size.height/2+R),d.translate(-l.x1/u,-l.y1/v),d.rotate((o.transform.rotate||0)*Math.PI/180),d.drawImage(M.image,-M.size.width/2,-M.size.height/2);const T={width:c,height:p,imagePosition:l,cropperPosition:Object.assign({},n)};o.containWithinAspectRatio&&(T.offsetImagePosition=this.getOffsetImagePosition(t,n,o,a));const x=this.getResizeRatio(c,p,o);return 1!==x&&(T.width=Math.round(c*x),T.height=o.maintainAspectRatio?Math.round(T.width/o.aspectRatio):Math.round(p*x),function(i,r,t){const n=i.width,o=i.height,s=n/(r=Math.round(r)),a=o/(t=Math.round(t)),l=Math.ceil(s/2),c=Math.ceil(a/2),p=i.getContext("2d");if(p){const h=p.getImageData(0,0,n,o),d=p.createImageData(r,t),u=h.data,v=d.data;for(let A=0;A<t;A++)for(let R=0;R<r;R++){const M=4*(R+A*r),T=A*a;let x=0,H=0,ft=0,_t=0,vt=0,zt=0,yt=0;const ii=Math.floor(R*s),oi=Math.floor(A*a);let V=Math.ceil((R+1)*s),q=Math.ceil((A+1)*a);V=Math.min(V,n),q=Math.min(q,o);for(let Z=oi;Z<q;Z++){const xt=Math.abs(T-Z)/c,si=R*s,ri=xt*xt;for(let $=ii;$<V;$++){const Ct=Math.abs(si-$)/l,L=Math.sqrt(ri+Ct*Ct);if(L>=1)continue;x=2*L*L*L-3*L*L+1;const F=4*($+Z*n);yt+=x*u[F+3],ft+=x,u[F+3]<255&&(x=x*u[F+3]/250),_t+=x*u[F],vt+=x*u[F+1],zt+=x*u[F+2],H+=x}}v[M]=_t/H,v[M+1]=vt/H,v[M+2]=zt/H,v[M+3]=yt/ft}i.width=r,i.height=t,p.putImageData(d,0,0)}}(h,T.width,T.height)),"blob"===s?this.cropToBlob(T,h,o):(T.base64=h.toDataURL("image/"+o.format,this.getQuality(o)),T)}cropToBlob(t,n,o){return(0,m.mG)(this,void 0,void 0,function*(){return t.blob=yield new Promise(s=>n.toBlob(s,"image/"+o.format,this.getQuality(o))),t.blob&&(t.objectUrl=URL.createObjectURL(t.blob)),t})}getCanvasTranslate(t,n,o){if("px"===n.transform.translateUnit){const s=this.getRatio(t,o);return{translateH:(n.transform.translateH||0)*s,translateV:(n.transform.translateV||0)*s}}return{translateH:n.transform.translateH?et(n.transform.translateH,t.transformed.size.width):0,translateV:n.transform.translateV?et(n.transform.translateV,t.transformed.size.height):0}}getRatio(t,n){return t.transformed.size.width/n.width}getImagePosition(t,n,o,s){const a=this.getRatio(t,s),l={x1:Math.round(n.x1*a),y1:Math.round(n.y1*a),x2:Math.round(n.x2*a),y2:Math.round(n.y2*a)};return o.containWithinAspectRatio||(l.x1=Math.max(l.x1,0),l.y1=Math.max(l.y1,0),l.x2=Math.min(l.x2,t.transformed.size.width),l.y2=Math.min(l.y2,t.transformed.size.height)),l}getOffsetImagePosition(t,n,o,s){const a=o.canvasRotation+t.exifTransform.rotate,l=this.getRatio(t,s);let c,p;a%2?(c=(t.transformed.size.width-t.original.size.height)/2,p=(t.transformed.size.height-t.original.size.width)/2):(c=(t.transformed.size.width-t.original.size.width)/2,p=(t.transformed.size.height-t.original.size.height)/2);const h={x1:Math.round(n.x1*l)-c,y1:Math.round(n.y1*l)-p,x2:Math.round(n.x2*l)-c,y2:Math.round(n.y2*l)-p};return o.containWithinAspectRatio||(h.x1=Math.max(h.x1,0),h.y1=Math.max(h.y1,0),h.x2=Math.min(h.x2,t.transformed.size.width),h.y2=Math.min(h.y2,t.transformed.size.height)),h}getResizeRatio(t,n,o){const s=o.resizeToWidth/t,a=o.resizeToHeight/n,l=new Array;o.resizeToWidth>0&&l.push(s),o.resizeToHeight>0&&l.push(a);const c=0===l.length?1:Math.min(...l);return c>1&&!o.onlyScaleDown?c:Math.min(c,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Dt=(()=>{class i{resetCropperPosition(t,n,o,s){if(null==t?void 0:t.nativeElement)if(o.cropperStaticHeight&&o.cropperStaticWidth)n.x1=0,n.x2=s.width>o.cropperStaticWidth?o.cropperStaticWidth:s.width,n.y1=0,n.y2=s.height>o.cropperStaticHeight?o.cropperStaticHeight:s.height;else{const a=Math.min(o.cropperScaledMaxWidth,s.width),l=Math.min(o.cropperScaledMaxHeight,s.height);if(o.maintainAspectRatio)if(s.width/o.aspectRatio<s.height){n.x1=0,n.x2=a;const c=a/o.aspectRatio;n.y1=(s.height-c)/2,n.y2=n.y1+c}else{n.y1=0,n.y2=l;const c=l*o.aspectRatio;n.x1=(s.width-c)/2,n.x2=n.x1+c}else n.x1=0,n.x2=a,n.y1=0,n.y2=l}}move(t,n,o){const s=this.getClientX(t)-n.clientX,a=this.getClientY(t)-n.clientY;o.x1=n.x1+s,o.y1=n.y1+a,o.x2=n.x2+s,o.y2=n.y2+a}resize(t,n,o,s,a){const l=this.getClientX(t)-n.clientX,c=this.getClientY(t)-n.clientY;switch(n.position){case"left":o.x1=Math.min(Math.max(n.x1+l,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth);break;case"topleft":o.x1=Math.min(Math.max(n.x1+l,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth),o.y1=Math.min(Math.max(n.y1+c,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"top":o.y1=Math.min(Math.max(n.y1+c,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"topright":o.x2=Math.max(Math.min(n.x2+l,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth),o.y1=Math.min(Math.max(n.y1+c,o.y2-a.cropperScaledMaxHeight),o.y2-a.cropperScaledMinHeight);break;case"right":o.x2=Math.max(Math.min(n.x2+l,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth);break;case"bottomright":o.x2=Math.max(Math.min(n.x2+l,o.x1+a.cropperScaledMaxWidth),o.x1+a.cropperScaledMinWidth),o.y2=Math.max(Math.min(n.y2+c,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"bottom":o.y2=Math.max(Math.min(n.y2+c,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"bottomleft":o.x1=Math.min(Math.max(n.x1+l,o.x2-a.cropperScaledMaxWidth),o.x2-a.cropperScaledMinWidth),o.y2=Math.max(Math.min(n.y2+c,o.y1+a.cropperScaledMaxHeight),o.y1+a.cropperScaledMinHeight);break;case"center":const p=t.scale,h=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(n.x2-n.x1)*p),a.cropperScaledMaxWidth),d=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(n.y2-n.y1)*p),a.cropperScaledMaxHeight);o.x1=n.clientX-h/2,o.x2=n.clientX+h/2,o.y1=n.clientY-d/2,o.y2=n.clientY+d/2,o.x1<0?(o.x2-=o.x1,o.x1=0):o.x2>s.width&&(o.x1-=o.x2-s.width,o.x2=s.width),o.y1<0?(o.y2-=o.y1,o.y1=0):o.y2>s.height&&(o.y1-=o.y2-s.height,o.y2=s.height)}a.maintainAspectRatio&&this.checkAspectRatio(n.position,o,s,a)}checkAspectRatio(t,n,o,s){let a=0,l=0;switch(t){case"top":n.x2=n.x1+(n.y2-n.y1)*s.aspectRatio,a=Math.max(n.x2-o.width,0),l=Math.max(0-n.y1,0),(a>0||l>0)&&(n.x2-=l*s.aspectRatio>a?l*s.aspectRatio:a,n.y1+=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"bottom":n.x2=n.x1+(n.y2-n.y1)*s.aspectRatio,a=Math.max(n.x2-o.width,0),l=Math.max(n.y2-o.height,0),(a>0||l>0)&&(n.x2-=l*s.aspectRatio>a?l*s.aspectRatio:a,n.y2-=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"topleft":n.y1=n.y2-(n.x2-n.x1)/s.aspectRatio,a=Math.max(0-n.x1,0),l=Math.max(0-n.y1,0),(a>0||l>0)&&(n.x1+=l*s.aspectRatio>a?l*s.aspectRatio:a,n.y1+=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"topright":n.y1=n.y2-(n.x2-n.x1)/s.aspectRatio,a=Math.max(n.x2-o.width,0),l=Math.max(0-n.y1,0),(a>0||l>0)&&(n.x2-=l*s.aspectRatio>a?l*s.aspectRatio:a,n.y1+=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"right":case"bottomright":n.y2=n.y1+(n.x2-n.x1)/s.aspectRatio,a=Math.max(n.x2-o.width,0),l=Math.max(n.y2-o.height,0),(a>0||l>0)&&(n.x2-=l*s.aspectRatio>a?l*s.aspectRatio:a,n.y2-=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"left":case"bottomleft":n.y2=n.y1+(n.x2-n.x1)/s.aspectRatio,a=Math.max(0-n.x1,0),l=Math.max(n.y2-o.height,0),(a>0||l>0)&&(n.x1+=l*s.aspectRatio>a?l*s.aspectRatio:a,n.y2-=l*s.aspectRatio>a?l:a/s.aspectRatio);break;case"center":n.x2=n.x1+(n.y2-n.y1)*s.aspectRatio,n.y2=n.y1+(n.x2-n.x1)/s.aspectRatio;const c=Math.max(0-n.x1,0),p=Math.max(n.x2-o.width,0),h=Math.max(n.y2-o.height,0),d=Math.max(0-n.y1,0);(c>0||p>0||h>0||d>0)&&(n.x1+=h*s.aspectRatio>c?h*s.aspectRatio:c,n.x2-=d*s.aspectRatio>p?d*s.aspectRatio:p,n.y1+=d*s.aspectRatio>p?d:p/s.aspectRatio,n.y2-=h*s.aspectRatio>c?h:c/s.aspectRatio)}}getClientX(t){var n;return(null===(n=t.touches)||void 0===n?void 0:n[0].clientX)||t.clientX||0}getClientY(t){var n;return(null===(n=t.touches)||void 0===n?void 0:n[0].clientY)||t.clientY||0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();let Pt=(()=>{class i{constructor(){this.autoRotateSupported=new Promise(i=>{const r=new Image;r.onload=()=>{i(1===r.width&&2===r.height)},r.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}loadImageFile(t,n){return(0,m.mG)(this,void 0,void 0,function*(){const o=yield t.arrayBuffer();return yield this.checkImageTypeAndLoadImageFromArrayBuffer(o,t.type,n)})}checkImageTypeAndLoadImageFromArrayBuffer(t,n,o){return this.isValidImageType(n)?this.loadImageFromArrayBuffer(t,o,n):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,n){return(0,m.mG)(this,void 0,void 0,function*(){const s=yield(yield fetch(t)).blob(),a=yield s.arrayBuffer();return yield this.loadImageFromArrayBuffer(a,n,s.type)})}loadBase64Image(t,n){const o=this.base64ToArrayBuffer(t);return this.loadImageFromArrayBuffer(o,n)}base64ToArrayBuffer(t){t=t.replace(/^data:([^;]+);base64,/gim,"");const n=atob(t),o=n.length,s=new Uint8Array(o);for(let a=0;a<o;a++)s[a]=n.charCodeAt(a);return s.buffer}loadImageFromArrayBuffer(t,n,o){return(0,m.mG)(this,void 0,void 0,function*(){const s=yield new Promise((a,l)=>(0,m.mG)(this,void 0,void 0,function*(){try{const c=new Blob([t],o?{type:o}:void 0),p=URL.createObjectURL(c),h=new Image,u="image/svg+xml"===o?yield this.getSvgImageSize(c):void 0;h.onload=()=>a({originalImage:h,originalImageSize:u,originalObjectUrl:p,originalArrayBuffer:t}),h.onerror=l,h.src=p}catch(c){l(c)}}));return yield this.transformImageFromArrayBuffer(s,n,null!=s.originalImageSize)})}getSvgImageSize(t){return(0,m.mG)(this,void 0,void 0,function*(){const s=(new DOMParser).parseFromString(yield t.text(),"image/svg+xml").querySelector("svg");if(!s)throw Error("Failed to parse SVG image");const a=s.getAttribute("width"),l=s.getAttribute("height");if(a&&l)return null;const c=s.getAttribute("viewBox")||s.getAttribute("viewbox");if(c){const p=c.split(" ");return{width:+p[2],height:+p[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})}transformImageFromArrayBuffer(t,n,o=!1){var s;return(0,m.mG)(this,void 0,void 0,function*(){const l=function(i){switch("object"==typeof i&&(i=function(i){const r=new DataView(i);if(65496!==r.getUint16(0,!1))return-2;const t=r.byteLength;let n=2;for(;n<t;){if(r.getUint16(n+2,!1)<=8)return-1;const o=r.getUint16(n,!1);if(n+=2,65505==o){if(1165519206!==r.getUint32(n+=2,!1))return-1;const s=18761==r.getUint16(n+=6,!1);n+=r.getUint32(n+4,s);const a=r.getUint16(n,s);n+=2;for(let l=0;l<a;l++)if(274==r.getUint16(n+12*l,s))return r.getUint16(n+12*l+8,s)}else{if(65280!=(65280&o))break;n+=r.getUint16(n,!1)}}return-1}(i)),i){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}((yield this.autoRotateSupported)?-1:t.originalArrayBuffer);if(!t.originalImage||!t.originalImage.complete)return Promise.reject(new Error("No image loaded"));const c={original:{objectUrl:t.originalObjectUrl,image:t.originalImage,size:null!==(s=t.originalImageSize)&&void 0!==s?s:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:l};return this.transformLoadedImage(c,n,o)})}transformLoadedImage(t,n,o=!1){return(0,m.mG)(this,void 0,void 0,function*(){const s=n.canvasRotation+t.exifTransform.rotate,a=t.original.size;if(!o&&0===s&&!t.exifTransform.flip&&!n.containWithinAspectRatio)return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:Object.assign({},a)},transformed:{objectUrl:t.original.objectUrl,image:t.original.image,size:Object.assign({},a)},exifTransform:t.exifTransform};const l=this.getTransformedSize(a,t.exifTransform,n),c=document.createElement("canvas");c.width=l.width,c.height=l.height;const p=c.getContext("2d");null==p||p.setTransform(t.exifTransform.flip?-1:1,0,0,1,c.width/2,c.height/2),null==p||p.rotate(Math.PI*(s/2)),null==p||p.drawImage(t.original.image,-a.width/2,-a.height/2);const h=yield new Promise(v=>c.toBlob(v,n.format));if(!h)throw new Error("Failed to get Blob for transformed image.");const d=URL.createObjectURL(h),u=yield this.loadImageFromObjectUrl(d);return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:Object.assign({},a)},transformed:{objectUrl:d,image:u,size:{width:u.width,height:u.height}},exifTransform:t.exifTransform}})}loadImageFromObjectUrl(t){return new Promise((n,o)=>{const s=new Image;s.onload=()=>n(s),s.onerror=o,s.src=t})}getTransformedSize(t,n,o){const s=o.canvasRotation+n.rotate;if(o.containWithinAspectRatio){if(s%2){const l=t.height/o.aspectRatio;return{width:Math.max(t.height,t.width*o.aspectRatio),height:Math.max(t.width,l)}}{const l=t.width/o.aspectRatio;return{width:Math.max(t.width,t.height*o.aspectRatio),height:Math.max(t.height,l)}}}return s%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Qt=(()=>{class i{constructor(t,n,o,s,a,l,c){this.cropService=t,this.cropperPositionService=n,this.loadImageService=o,this.sanitizer=s,this.cd=a,this.zone=l,this.hammerLoader=c,this.settings=new Nt,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=z,this.imageVisible=!1,this.cropperFrameAriaLabel=this.settings.cropperFrameAriaLabel,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.reset()}ngOnChanges(t){var n;this.onChangesUpdateSettings(t),this.onChangesInputImage(t),(null===(n=this.loadedImage)||void 0===n?void 0:n.original.image.complete)&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(o=>this.setLoadedImage(o)).catch(o=>this.loadImageError(o)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!t.maintainAspectRatio&&!t.aspectRatio?t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&(this.hideResizeSquares=!0,this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1}))}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var t,n,o;return(null===(o=null===(n=null===(t=this.imageChangedEvent)||void 0===t?void 0:t.target)||void 0===n?void 0:n.files)||void 0===o?void 0:o.length)>0}setCssTransform(){var t;const n=(null===(t=this.transform)||void 0===t?void 0:t.translateUnit)||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${n}, ${this.transform.translateV||0}${n}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.objectUrl),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var t,n;return(null===(n=null===(t=this.sourceImage)||void 0===t?void 0:t.nativeElement)||void 0===n?void 0:n.offsetWidth)>0}onResize(){if(this.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{const t=Object.assign({},this.maxSize);this.setMaxSize(),this.resizeCropperPosition(t),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}}activatePinchGesture(){var t;return(0,m.mG)(this,void 0,void 0,function*(){yield null===(t=this.hammerLoader)||void 0===t?void 0:t.call(this);const n=(null==window?void 0:window.Hammer)||null;if(n){const o=new n(this.wrapper.nativeElement);o.get("pinch").set({enable:!0}),o.on("pinchmove",this.onPinch.bind(this)),o.on("pinchend",this.pinchStop.bind(this)),o.on("pinchstart",this.startPinch.bind(this))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})}resizeCropperPosition(t){(t.width!==this.maxSize.width||t.height!==this.maxSize.height)&&(this.cropper.x1=this.cropper.x1*this.maxSize.width/t.width,this.cropper.x2=this.cropper.x2*this.maxSize.width/t.width,this.cropper.y1=this.cropper.y1*this.maxSize.height/t.height,this.cropper.y2=this.cropper.y2*this.maxSize.height/t.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings,this.maxSize),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const n=+t.key;n>=1&&n<=9&&(this.settings.stepSize=n)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const o=t.shiftKey?z.Resize:z.Move,s=t.altKey?function(i){switch(i){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function(i){switch(i){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),a=function(i,r){switch(i){case"ArrowUp":return{clientX:0,clientY:-1*r};case"ArrowRight":return{clientX:r,clientY:0};case"ArrowDown":return{clientX:0,clientY:r};default:return{clientX:-1*r,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},o,s),this.handleMouseMove(a),this.handleMouseUp()}startMove(t,n,o=null){var s,a;this.disabled||(null===(s=this.moveStart)||void 0===s?void 0:s.active)&&(null===(a=this.moveStart)||void 0===a?void 0:a.type)===z.Pinch||n===z.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:n,position:o,transform:Object.assign({},this.transform),clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper),this.initMouseMove())}initMouseMove(){(0,tt.T)((0,k.R)(document,"mousemove"),(0,k.R)(document,"touchmove")).pipe((0,y.R)((0,tt.T)((0,k.R)(document,"mouseup"),(0,k.R)(document,"touchend")).pipe((0,wt.P)()))).subscribe({next:t=>this.zone.run(()=>{this.handleMouseMove(t),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}startPinch(t){!this.safeImgDataUrl||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:z.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}handleMouseMove(t){var n,o;if(this.moveStart.active)if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===z.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===z.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===z.Drag){const s=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,a=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform=Object.assign(Object.assign({},this.transform),{translateH:((null===(n=this.moveStart.transform)||void 0===n?void 0:n.translateH)||0)+s,translateV:((null===(o=this.moveStart.transform)||void 0===o?void 0:o.translateV)||0)+a}),this.setCssTransform()}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===z.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.markForCheck())}setMaxSize(){if(this.sourceImage){const t=getComputedStyle(this.sourceImage.nativeElement);this.maxSize.width=parseFloat(t.width),this.maxSize.height=parseFloat(t.height),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){var t,n;(null===(n=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)||void 0===n?void 0:n.image)?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){var t,n;if(null===(n=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)||void 0===n?void 0:n.image){const o=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/o:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/o:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}handleMouseUp(){var t;this.moveStart.active&&(this.moveStart.active=!1,(null===(t=this.moveStart)||void 0===t?void 0:t.type)===z.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(t=this.settings.output){var n,o;if(null!=(null===(o=null===(n=this.loadedImage)||void 0===n?void 0:n.transformed)||void 0===o?void 0:o.image)){if(this.startCropImage.emit(),"blob"===t)return this.cropToBlob();if("base64"===t)return this.cropToBase64()}return null}cropToBlob(){return new Promise((t,n)=>this.zone.run(()=>(0,m.mG)(this,void 0,void 0,function*(){const o=yield this.cropService.crop(this.loadedImage,this.cropper,this.settings,"blob",this.maxSize);o?(this.imageCropped.emit(o),t(o)):n("Crop image failed")})))}cropToBase64(){const t=this.cropService.crop(this.loadedImage,this.cropper,this.settings,"base64",this.maxSize);return t?(this.imageCropped.emit(t),t):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ut),e.Y36(Dt),e.Y36(Pt),e.Y36(J.H7),e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(J.vm,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["image-cropper"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Tt,7),e.Gf(Mt,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.wrapper=o.first),e.iGM(o=e.CRH())&&(n.sourceImage=o.first)}},hostVars:6,hostBindings:function(t,n){1&t&&e.NdJ("resize",function(){return n.onResize()},!1,e.Jf7),2&t&&(e.Udp("text-align",n.alignImage),e.ekj("disabled",n.disabled)("ngx-ix-hidden",n.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart","error"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,n){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,bt,2,8,"img",1),e._UZ(3,"div",2),e.YNc(4,St,3,16,"div",3),e.qZA()),2&t&&(e.Udp("background",n.imageVisible&&n.backgroundColor),e.xp6(2),e.Q6J("ngIf",n.safeImgDataUrl),e.xp6(1),e.Udp("width",n.maxSize.width,"px")("height",n.maxSize.height,"px")("margin-left","center"===n.alignImage?n.marginLeft:null),e.xp6(1),e.Q6J("ngIf",n.imageVisible))},directives:[f.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),i})(),Wt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[f.ez]]}),i})();const Yt=[{path:"",component:(()=>{class i{constructor(t){this.sanitizer=t,this.imageChangedEvent="",this.croppedImage=""}ngOnInit(){}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t){null!=t.objectUrl&&(this.croppedImage=this.sanitizer.bypassSecurityTrustUrl(t.objectUrl))}imageLoaded(t){}cropperReady(){}loadImageFailed(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J.H7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-welcome"]],decls:5,vars:4,consts:[["type","file",3,"change"],["format","png",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Image cropper for Angular"),e.qZA(),e.TgZ(2,"input",0),e.NdJ("change",function(s){return n.fileChangeEvent(s)}),e.qZA(),e.TgZ(3,"image-cropper",1),e.NdJ("imageCropped",function(s){return n.imageCropped(s)})("imageLoaded",function(s){return n.imageLoaded(s)})("cropperReady",function(){return n.cropperReady()})("loadImageFailed",function(){return n.loadImageFailed()}),e.qZA(),e._UZ(4,"img",2)),2&t&&(e.xp6(3),e.Q6J("imageChangedEvent",n.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",4/3),e.xp6(1),e.Q6J("src",n.croppedImage,e.LSH))},directives:[Qt],styles:[""]}),i})()}];let Ht=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[K.Bz.forChild(Yt)],K.Bz]}),i})();var C=g(946),S=(g(9765),g(9761),g(5435),g(2729),g(6182),g(464)),E=g(521);let ot=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[E.ud]]}),i})();g(6237);const jt={disabled:!1};new e.OlP("nz-wave-global-options",{providedIn:"root",factory:function(){return jt}});let st=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[E.ud]]}),i})(),lt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[C.vT,f.ez,st,S.PV,ot],ot,st]}),i})();g(6461),g(1841),g(5917),g(7574),g(5319),g(3190),g(8002),g(6526),g(7238);var pt=g(6756),ee=g(665),Y=g(8178);new Map([["success","check"],["exception","close"]]),new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]);let Ne=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[C.vT,f.ez,S.PV,Y.T]]}),i})();g(7070);var U=g(641),D=(g(7519),g(6911)),gt=g(5090);let Ye=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[C.vT,f.ez,gt.U8,Y.T,D.e4,U.g]]}),i})(),ei=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[C.vT,f.ez,ee.u5,E.ud,Ye,Ne,pt.YI,S.PV,lt]]}),i})(),ni=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[Ht,lt,S.PV,ei,Wt]]}),i})()}}]);